<!DOCTYPE html>
<html>

<head>
    <title>Donation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
        }

        .card {
            border-radius: 10px;
            transition: box-shadow 0.2s;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .peripheral-scroll {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 15px; /* Prevent the scrollbar from pushing the content */
        }

        .form-group.peripheral-set + .form-group.peripheral-set {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #eaeaea;
        }

        .remove-btn {
            transition: background-color 0.2s, color 0.2s;
        }

        .remove-btn:hover {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/organization/dashboard">Dashboard</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto">  
                <li class="nav-item">
                    <a class="nav-link" href="/organization/donations">My Donations</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/organization/account">My Account</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0" method="post" action="/organization/logout">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Logout</button>
            </form>
        </div>
    </nav>

    <div class="container">
        <h3 class="mb-4">Donate Equipment</h3>

        <!-- Donation Type Selection -->
        <div class="card mb-4 p-4">
            <div class="form-group">
                <label for="donationType">Choose what to donate:</label>
                <select id="donationType" class="form-control" onchange="toggleDonationForms()">
                    <option value="pc">Complete PC System</option>
                    <option value="peripheral">Peripherals/Components</option>
                    <option value="both">Both</option>
                </select>
            </div>
        </div>
        
        <div class="mt-3 mb-3">
            <button type="submit" class="btn btn-success">Submit Donation</button>
        </div>
        

        <!-- Donation Forms Row -->
        <div class="row">
            <!-- Complete PC System Donation Form -->
            <div class="col-lg-6 mb-4">
                <div class="card p-4" id="pcForm">
                    <h4>Complete PC System</h4>
                    <div class="form-group">
                        <!-- ... fields for the PC ... -->
                        <input type="text" class="form-control" placeholder="Brand" name="brand">
                        <input type="text" class="form-control mt-2" placeholder="Model" name="model">
                        <input type="text" class="form-control mt-2" placeholder="Processor" name="processor">
                        <input type="number" class="form-control mt-2" placeholder="RAM Size (in GB)" name="ramSize">
                        <input type="text" class="form-control mt-2" placeholder="Storage" name="storage">
                        <input type="text" class="form-control mt-2" placeholder="Graphics Card" name="graphicsCard">
                        <input type="text" class="form-control mt-2" placeholder="Condition" name="condition">
                        <input type="number" class="form-control mt-2" placeholder="Quantity" name="pcQuantity" min="1" value="1">
                    </div>
                </div>
            </div>

            <!-- Peripherals/Components Donation Form -->
            <div class="col-lg-6 mb-4">
                <div class="card p-4" id="peripheralForm" style="display:none;">
                    <h4>Peripherals/Components</h4>
                    <div id="peripheralFields" class="peripheral-scroll"> 
                        <!-- A single set of fields for a peripheral/component -->
                        <div class="form-group peripheral-set">
                            <input type="text" class="form-control" placeholder="Type" name="type[]">
                            <input type="text" class="form-control mt-2" placeholder="Brand" name="brand[]">
                            <input type="text" class="form-control mt-2" placeholder="Model" name="model[]">
                            <input type="text" class="form-control mt-2" placeholder="Condition" name="condition[]">
                            <input type="number" class="form-control mt-2" placeholder="Quantity" name="peripheralQuantity[]" min="1" value="1">
                            <button type="button" class="btn btn-danger mt-2 remove-btn" onclick="removePeripheralFields(this)" style="display:none;">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary mt-2" onclick="addPeripheralFields()">Add Another Peripheral</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleDonationForms() {
            var donationType = document.getElementById('donationType').value;
            if (donationType === 'pc') {
                document.getElementById('pcForm').style.display = 'block';
                document.getElementById('peripheralForm').style.display = 'none';
            } else if (donationType === 'peripheral') {
                document.getElementById('pcForm').style.display = 'none';
                document.getElementById('peripheralForm').style.display = 'block';
            } else if (donationType === 'both') {
                document.getElementById('pcForm').style.display = 'block';
                document.getElementById('peripheralForm').style.display = 'block';
            }
        }

        function addPeripheralFields() {
            const peripheralFieldsContainer = document.getElementById('peripheralFields');
            const newPeripheralFields = document.createElement('div');
            newPeripheralFields.classList.add('form-group', 'peripheral-set');
            newPeripheralFields.innerHTML = `
                <input type="text" class="form-control mt-2" placeholder="Type" name="type[]">
                <input type="text" class="form-control mt-2" placeholder="Brand" name="brand[]">
                <input type="text" class="form-control mt-2" placeholder="Model" name="model[]">
                <input type="text" class="form-control mt-2" placeholder="Condition" name="condition[]">
                <input type="number" class="form-control mt-2" placeholder="Quantity" name="peripheralQuantity[]" min="1" value="1">
                <button type="button" class="btn btn-danger mt-2 remove-btn" onclick="removePeripheralFields(this)">Remove</button>
            `;
            peripheralFieldsContainer.appendChild(newPeripheralFields);

            // Check if there's more than one peripheral set to show the remove buttons
            const peripheralSets = peripheralFieldsContainer.querySelectorAll('.peripheral-set');
            if (peripheralSets.length > 1) {
                peripheralFieldsContainer.querySelectorAll('.remove-btn').forEach(btn => btn.style.display = 'inline-block');
            }
        }

        function removePeripheralFields(buttonElement) {
            const peripheralSet = buttonElement.closest('.peripheral-set');
            peripheralSet.remove();

            // After removing, check if only one peripheral set is left to hide the remove button
            const peripheralFieldsContainer = document.getElementById('peripheralFields');
            const peripheralSets = peripheralFieldsContainer.querySelectorAll('.peripheral-set');
            if (peripheralSets.length === 1) {
                peripheralFieldsContainer.querySelector('.remove-btn').style.display = 'none';
            }
        }
    </script>
</body>

</html>
